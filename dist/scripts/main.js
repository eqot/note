(function(){"use strict";var a,b;a=function(){function a(){var a,b,c,d;for(this.note=new Note("#canvas"),this.handlers.pick=new Pick(this.note),this.handlers.freehand=new Freehand(this.note),this.handlers.rectangle=new Rectangle(this.note),d=document.querySelectorAll("#buttons button"),b=0,c=d.length;c>b;b++)a=d[b],this.elements[a.id]=a,a.addEventListener("click",this.onClick.bind(this));this.setMode("freehand")}return a.prototype.note=null,a.prototype.elements={},a.prototype.handlers={},a.prototype.mode=null,a.prototype.onClick=function(a){return this.setMode(a.target.id)},a.prototype.setMode=function(a){var b;return null!=this.mode&&(this.elements[this.mode].classList.remove("active"),this.handlers[this.mode].deactivate()),this.mode=a,this.elements[this.mode].classList.add("active"),b=this.handlers[this.mode],null!=b?(b.activate(),window["native"]={mouseDown:b.onNativeDown.bind(b),mouseMove:b.onNativeMove.bind(b),mouseUp:b.onNativeUp.bind(b)}):void 0},a}(),b=new a}).call(this);