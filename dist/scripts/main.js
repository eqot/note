(function(){"use strict";var a,b;a=function(){function a(){var a,b,c,d;for(this.note=new Note("#canvas"),this.handlers.pick=new Pick(this.note),this.handlers.freehand=new Freehand(this.note),this.handlers.rectangle=new Rectangle(this.note),d=document.querySelectorAll("#buttons button"),b=0,c=d.length;c>b;b++)a=d[b],a.addEventListener("click",this.onClick.bind(this));this.setMode("freehand")}return a.prototype.note=null,a.prototype.handlers={},a.prototype.prevHandler=null,a.prototype.onClick=function(a){return this.setMode(a.target.id)},a.prototype.setMode=function(a){var b,c;return null!=(c=this.prevHandler)&&c.deactivate(),b=this.handlers[a],null!=b&&b.activate(),window["native"]={mouseDown:b.onNativeDown.bind(b),mouseMove:b.onNativeMove.bind(b),mouseUp:b.onNativeUp.bind(b)},this.prevHandler=b},a}(),b=new a}).call(this);